<div *ngIf="member" class="container">
    <div *ngIf="member.currentOrderId === 0" class="row justify-content-center">
        <div class="col-md-8">
            <h1 class="">Place your order</h1>
            <div class="card">
                <div class="card-body">
                    <form class="form-horizontal" [formGroup]="placeOrderForm" (ngSubmit)="placeOrderForm.valid && placeOrder()" autocomplete="off"
                        method="post" action="#">
                        <mat-form-field id="selectProduct">
                            <div>
                                <mat-label>Product</mat-label>
                                <mat-select (selectionChange)="selected($event)" id="matSelect" formControlName="productName" name="productName">
                                    <ng-container *ngFor="let product of (products$ | async)" name="productName">
                                     <mat-option  [value]="product.name" name="fieldName" ngDefaultControl  [formControl]='placeOrderForm.controls["productName"]'>{{product.name}} {{product.price}} rsd</mat-option>
                                    </ng-container>
                                  </mat-select>
                            </div>
                        </mat-form-field>

                        <mat-form-field id="quantity">
                            <div id="quantity">
                                <mat-label>Quantity</mat-label>
                                <input min="1" max="10" type="number" [formControl]='placeOrderForm.controls["quantity"]' matInput>
                            </div>
                        </mat-form-field>
                                
                        <app-text-input [formControl]='placeOrderForm.controls["deliveryAddress"]' [label]='"Delivery Address"'>
                        </app-text-input>

                        <app-text-input [formControl]='placeOrderForm.controls["comment"]' [label]='"Comment"'>
                        </app-text-input>
                        
                        <div class="row" *ngIf="validationErrors.length > 0">
                            <ul class="text-danger">
                                <li *ngFor="let error of validationErrors">
                                    {{error}}
                                </li>
                            </ul>
                        </div>

                        <mat-form-field id="totalPrice">
                            <div id="totalPrice">
                                <mat-label>Total price: </mat-label>
                                <input readonly type="number" [value]="this.placeOrderForm.value.quantity * this.price" matInput> 
                            </div>
                        </mat-form-field>
                    
                       
                        <div id="button" class="form-group">
                            <button [disabled]="!placeOrderForm.valid" type="submit"
                                class="btn btn-primary btn-lg btn-block place-order-button">Order now!</button>
                        </div>
                        <div id="routerlink">
                            <a routerLink="/dashboard">Go back to dashboard</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="member" class="container">
    <div *ngIf="(member.currentOrderId !== 0 && currentOrder.delivererId === 1)" class="row justify-content-center">
        <div  class="col-md-8">
            <h1 class="">Your order is ready.</h1>
            <h2> Wait until deliverer accepts your order </h2>
        </div>
    </div>

    <div *ngIf="(member.currentOrderId !== 0 && currentOrder.delivererId > 1)" class="row justify-content-center">
        <div *ngIf="" class="col-md-8">
            <h1> Your order is accepted and deliverer is on it's way.</h1>
        </div>
    </div>
</div>